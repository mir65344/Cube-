// –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —É–≥–ª—É–±–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
function showDeepTestOffer(score) {
    setTimeout(() => {
        const offerHtml = `
            <div class="deep-test-offer">
                <div class="offer-content">
                    <h3>üéØ –•–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏?</h3>
                    <p>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç (${score.toFixed(1)}/5) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –µ—Å—Ç—å –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è.</p>
                    <p>–ü—Ä–æ–π–¥–∏—Ç–µ —É–≥–ª—É–±–ª–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ñ–µ—Ä–µ –∂–∏–∑–Ω–∏ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –¥–µ–π—Å—Ç–≤–∏–π.</p>
                    <div class="offer-buttons">
                        <a href="deep-test.html" class="btn-offer-primary">–ü—Ä–æ–π—Ç–∏ —É–≥–ª—É–±–ª–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç</a>
                        <button class="btn-offer-secondary" id="close-offer">–°–ø–∞—Å–∏–±–æ, –ø–æ–∑–∂–µ</button>
                    </div>
                </div>
            </div>
        `;
        
        const offerElement = document.createElement('div');
        offerElement.innerHTML = offerHtml;
        document.querySelector('.quiz-container')?.appendChild(offerElement);
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏
        if (!document.querySelector('#deep-test-styles')) {
            const style = document.createElement('style');
            style.id = 'deep-test-styles';
            style.textContent = `
                .deep-test-offer {
                    margin-top: 30px;
                    padding: 20px;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    border-radius: 15px;
                    color: white;
                    animation: slideIn 0.5s ease-out;
                }
                @keyframes slideIn {
                    from { transform: translateY(20px); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
                .offer-buttons {
                    display: flex;
                    gap: 15px;
                    margin-top: 20px;
                }
                .btn-offer-primary {
                    padding: 12px 24px;
                    background: white;
                    color: #667eea;
                    border: none;
                    border-radius: 8px;
                    font-weight: bold;
                    cursor: pointer;
                    transition: transform 0.3s;
                    text-decoration: none;
                    display: inline-block;
                    text-align: center;
                }
                .btn-offer-primary:hover {
                    transform: translateY(-2px);
                    text-decoration: none;
                }
                .btn-offer-secondary {
                    padding: 12px 24px;
                    background: transparent;
                    color: white;
                    border: 2px solid white;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: background 0.3s;
                }
                .btn-offer-secondary:hover {
                    background: rgba(255, 255, 255, 0.1);
                }
                @media (max-width: 768px) {
                    .offer-buttons {
                        flex-direction: column;
                    }
                }
            `;
            document.head.appendChild(style);
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.getElementById('close-offer')?.addEventListener('click', () => {
            offerElement.remove();
        });
    }, 1000);
}

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
window.initializeQuiz = function() {
    // –í–∞—à–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è quiz
    submitBtn.disabled = true;
    submitBtn.style.opacity = '0.6';
    loadTestHistory();
};

window.showDeepTestOffer = showDeepTestOffer;
